<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Sun Help Desk </title>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="EXPIRES" CONTENT="0">
<META NAME="RESOURCE-TYPE" CONTENT="DOCUMENT">
<META NAME="DISTRIBUTION" CONTENT="GLOBAL">
<META NAME="AUTHOR" CONTENT="Sun Help Desk">
<META NAME="COPYRIGHT" CONTENT="Copyright (c) 2003 by Sun Help Desk">
<META NAME="KEYWORDS" CONTENT="News, news, New, new, Technology, technology, Headlines, headlines, Nuke, nuke, PHP-Nuke, phpnuke, php-nuke, Geek, geek, Geeks, geeks, Hacker, hacker, Hackers, hackers, Linux, linux, Windows, windows, Software, software, Download, download, Downloads, downloads, Free, FREE, free, Community, community, MP3, mp3, Forum, forum, Forums, forums, Bulletin, bulletin, Board, board, Boards, boards, PHP, php, Survey, survey, Kernel, kernel, Comment, comment, Comments, comments, Portal, portal, ODP, odp, Open, open, Open Source, OpenSource, Opensource, opensource, open source, Free Software, FreeSoftware, Freesoftware, free software, GNU, gnu, GPL, gpl, License, license, Unix, UNIX, *nix, unix, MySQL, mysql, SQL, sql, Database, DataBase, Blogs, blogs, Blog, blog, database, Mandrake, mandrake, Red Hat, RedHat, red hat, Slackware, slackware, SUSE, SuSE, suse, Debian, debian, Gnome, GNOME, gnome, Kde, KDE, kde, Enlightenment, enlightenment, Interactive, interactive, Programming, programming, Extreme, extreme, Game, game, Games, games, Web Site, web site, Weblog, WebLog, weblog, Guru, GURU, guru, Oracle, oracle, db2, DB2, odbc, ODBC, plugin, plugins, Plugin, Plugins">
<META NAME="DESCRIPTION" CONTENT="">
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
<META NAME="REVISIT-AFTER" CONTENT="1 DAYS">
<META NAME="RATING" CONTENT="GENERAL">
<META NAME="GENERATOR" CONTENT="PHP-Nuke 6.9 - Copyright 2003 by http://phpnuke.org">
<LINK REL="StyleSheet" HREF="themes/WinterICE/style/style.css" TYPE="text/css">





</head>

<body "topmargin="0"leftmargin="0"marginwidth="0"marginheight="0">
					<table width="100%" cellpadding="5" cellspacing="0" class="tblBorder">
						<tr>
							<td nowrap><span class="mainmenu"><strong>Sun Help Desk</strong>
</td>
							<td nowrap align="right"><span class="mainmenu">
<a href="index.php" class="mainmenu">Home</a> : 
<a href="modules.php?name=Web_Links" class="mainmenu">Links</a> : 
<a href="quizzes/welcome.php" target=_blank class="mainmenu">Quizzes</a> : 
<a href="jmr_index.htm" class="mainmenu">Projects</a> : 
<a href="cgi-bin/hse/HomepageSearchEngine.cgi" target=_top class="mainmenu">Search</a> : 
<a href="modules.php?name=Recommend_Us" class="mainmenu">Recommend</a> : 
<a href="modules.php?name=Feedback" class="mainmenu">Contact</a>

							</span>
							</td>
						</tr>
					</table>									
				</td>
			</tr>
	<tr>
		<td align="center" valign="top">
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
</table>

        <table width="100%" cellpadding="0" cellspacing="0" border="0" align="center">
      <tr valign="top">
        <td><img src="themes/WinterICE/images/pixel.gif" width="1" height="1" border="0" alt=""></td>
</tr></table>
<table width="100%" cellpadding="0" cellspacing="0" border="0" align="center">
<tr valign="top">
  <td valign="top" width="1" background="themes/WinterICE/images/7px.gif">
</td><td valign="top" width="100%"><table width="100%" border="0" cellspacing="0" cellpadding="5">
  <tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="1">
        <tr>
          <td bgcolor="#FFFFFF"><table width="100%" border="0" cellspacing="0" cellpadding="1">
              <tr>
                <td bgcolor="#B6DFFB"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                      <td bgcolor="#FFFFFF"><table width="100%" border="0" cellspacing="0" cellpadding="4">
                          <tr>
                            <td><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0068)http://www.sunhelpdesk.com/users/john/Mirror-boot-disk-with-VxVM.htm -->
<!-- saved from url=(0068)http://www.sunhelpdesk.com/users/john/Mirror-boot-disk-with-VxVM.htm --><!-- saved from url=(0068)http://www.sunhelpdesk.com/users/john/Mirror-boot-disk-with-VxVM.htm -->
<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List
href="./jmr_Mirroring_Boot_Disks_Veritas_Volume_Manager_files/filelist.xml">
<title>Mirroring Boot Disks with Veritas Volume Manager</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>JRichardson</o:Author>
  <o:LastAuthor>JRichard</o:LastAuthor>
  <o:Revision>45</o:Revision>
  <o:TotalTime>191</o:TotalTime>
  <o:Created>2001-09-17T20:42:00Z</o:Created>
  <o:LastSaved>2003-10-30T22:25:00Z</o:LastSaved>
  <o:Pages>5</o:Pages>
  <o:Words>1931</o:Words>
  <o:Characters>11011</o:Characters>
  <o:Company>Bay Data Consultants</o:Company>
  <o:Lines>91</o:Lines>
  <o:Paragraphs>22</o:Paragraphs>
  <o:CharactersWithSpaces>13522</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:14.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:0pt;}
h2
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-weight:bold;}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:145899423;
	mso-list-type:hybrid;
	mso-list-template-ids:-555998506 -333427776 -2143550188 392872744 2063515092 1105632 -859024276 132778018 1849071660 1272601714;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l1
	{mso-list-id:1858932547;
	mso-list-type:hybrid;
	mso-list-template-ids:1298581192 2121195890 1878814692 -4271114 131605478 2020656168 -1095311868 -995318616 1263806198 -98933152;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<h1><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>Mirroring
Boot Drives with Veritas Volume Manager(VxVM)<o:p></o:p></span></h1>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Author:<span style="mso-spacerun: yes">&nbsp; </span>Author:
John Richardson<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Date: 01/11/02<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Source: http://www.sunhelpdesk.com<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Credits:<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>This document is based upon the Sun Blueprints articles:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l0 level1 lfo3;tab-stops:list .5in'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'><a
     href="http://wwwwswest.sun.com/blueprints/0800/vxvmref.pdf"><span
     style='color:windowtext'>Toward a Reference Configuration for VxVM Managed
     Boot Disks</span></a> <o:p></o:p></span></li>
</ul>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>Authors:<span style="mso-spacerun:
yes">&nbsp; </span>Gene Trantham, John S. Howard<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l1 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'><a
     href="http://wwwwswest.sun.com/blueprints/0700/vxvmpr.pdf"><span
     style='color:windowtext'>VxVM Private Regions: Mechanics &amp; Internals
     of the VxVM Confiuration Database</span></a> <o:p></o:p></span></li>
</ul>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>Author: Gene Trantham<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>I highly recommend reading the above articles for a complete
understanding of the process.<span style="mso-spacerun: yes">&nbsp;&nbsp;
</span>The purpose of this document is to provide a quick reference as well as
additional methods for recovery and adittional best practices.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h2><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>Introduction<o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Many administrators choose to use an alternative volume
manager to mirror the boot drives because of the difficulties recovering from
primary disk failure under VxVM.<span style="mso-spacerun: yes">&nbsp;
</span>Typically, Solsitce Disksuite(free product) is used to <a
href="http://www.sunhelpdesk.com/users/john/002.htm"><span style='color:windowtext'>mirror
the boot drive</span></a> while VxVM is used for all other storage.<span
style="mso-spacerun: yes">&nbsp; </span>However, if VxVM is installed and
configured correctly, the recovery process is greatly simplified.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>The problems associated with recovery are associated in part
by the way it encapsulates the boot disk(see above articles for details).<span
style="mso-spacerun: yes">&nbsp; </span>We must properly install and configure
VxVM so that these issues are avoided.<span style="mso-spacerun: yes">&nbsp;
</span>In simple terms, we must first mirror the root disk.<span
style="mso-spacerun: yes">&nbsp; </span>Second, we will remove the rootdisk
from rootdg and reinitialize the drive.<span style="mso-spacerun: yes">&nbsp;
</span>Third, we will add the root disk back into rootdg and re-attach the
mirror.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Note:<span style="mso-spacerun: yes">&nbsp; </span>You may
be interested in determining if a system's boot drives have already been
mirrored properly.<span style="mso-spacerun: yes">&nbsp; </span>One method to
identify if the rootdisk was properly mirrored is to look for the presence of
the &quot;rootdisk-B0&quot; subdisk.<span style="mso-spacerun: yes">&nbsp;
</span>This subdisk is used to map out the boot block of the rootdisk.<span
style="mso-spacerun: yes">&nbsp; </span>Use the &quot;vxprint -ht rootvol&quot;
command to verify if it exists.<span style="mso-spacerun: yes">&nbsp; </span>If
it does exist, the boot drive has NOT been mirrored according to these
procedures.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h2><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>Mirror
the Drives using VxVM<o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Identify the root disk and mirror disk.<span
style="mso-spacerun: yes">&nbsp; </span>It is a good idea to have the drives on
different controllers if possible for improved redundancy.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># format<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>Searching for disks...done<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>AVAILABLE DISK SELECTIONS:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in;tab-stops:357.6pt'><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0. c0t0d0
&lt;SUN9.0G cyl 4924 alt 2 hd 27 sec 133&gt;<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;===<span
style="mso-spacerun: yes">&nbsp; </span><b>Root </b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/pci@1f,4000/scsi@3/sd@0,0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in;tab-stops:356.8pt'><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>1. c0t1d0
&lt;SUN9.0G cyl 4924 alt 2 hd 27 sec 133&gt;<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;===<span
style="mso-spacerun: yes">&nbsp; </span><b>Root Mirror</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/pci@1f,4000/scsi@3/sd@1,0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>Specify disk (enter its number):
^D<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Install Veritas Volume Manger according to
documentation.<span style="mso-spacerun: yes">&nbsp; </span>Only encapsulate
the root disk.<span style="mso-spacerun: yes">&nbsp; </span>Do NOT encapsulate
any other drives.<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>NOTE:</span></b><span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:Arial'><span style="mso-spacerun: yes">&nbsp; </span>You may
want to setup your PATH environment variable if you have not already done
so.<span style="mso-spacerun: yes">&nbsp; </span>If you installed in VxVM in
the default location you can use the following:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># PATH=$PATH:/usr/lib/vxvm/bin;
export PATH<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Initialize the root mirror disk.<span style="mso-spacerun:
yes">&nbsp; </span>Add it to &quot;rootdg&quot; group and name the disk
&quot;rootmirror&quot;.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdisksetup -i<span
style="mso-spacerun: yes">&nbsp; </span>c0t1d0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg -g rootdg adddisk
rootmirror=c0t1d0<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Mirror the root disk according to the partition layout.<span
style="mso-spacerun: yes">&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>If you have /, swap, /var, /opt, and /home defined as partitions
0,1,3, 4, and 7 respectively, you must attach the mirrors in this same exact
order.<span style="mso-spacerun: yes">&nbsp; </span>If you are not sure,
Veritas may have created notes in your /etc/vfstab which describe how the
partitions were layed before VxVM encapsulated the boot disk.<span
style="mso-spacerun: yes">&nbsp; </span>It is very important to attach each
mirror in the exact numerical order as it was originaly carved on the boot
disk. <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxrootmir rootmirror<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== partition 0</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror
swapvol rootmirror<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b>&lt;===
partition 1</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror var
rootmirror<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== partition 3</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror opt
rootmirror<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== partition 4</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror home
rootmirror<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><b>&lt;===
partition 7<o:p></o:p></b></span></p>

<p class=MsoNormal style='margin-left:.5in'><b><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></b></p>

<p class=MsoBodyTextIndent><span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:Arial'>NOTE:<span style="mso-spacerun: yes">&nbsp; </span>Be
sure to mirror any other volumes configured on the boot disk.<span
style="mso-spacerun: yes">&nbsp; </span>This may be the case if you have
additional volumes configured on the boot drive.<span style="mso-spacerun:
yes">&nbsp; </span>Use the &quot;vxprint&quot; command to list all
volumes.<span style="mso-spacerun: yes">&nbsp; </span>You can also use
&quot;vxprint -p&quot; to make sure there are 2 plexes associated with each
volume.<span style="mso-spacerun: yes">&nbsp; </span>Remember to modify the
remaining commands to include these additional volumes.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Disassociate and remove the existing plexes from the
rootdisk:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex -g rootdg dis rootvol-01
swapvol-01 var-01 opt-01 home-01<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxedit -g rootdg -fr rm
rootvol-01 swapvol-01 var-01 opt-01 home-01<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxedit rm rootdiskPriv<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>### May not be in rootdg - Ignore if Error<b> <o:p></o:p></b></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Remove the rootdisk from rootdg:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg -g rootdg rmdisk rootdisk<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Re-initialize the rootdisk and add back into rootdg:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdisksetup -i c0t0d0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg -g rootdg adddisk
rootdisk=c0t0d0<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Re-attach the mirror in the correct order according to the
partition layout:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxrootmir rootdisk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror
swapvol rootdisk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror var
rootdisk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror opt
rootdisk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxassist -g rootdg mirror home
rootdisk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Create the underlying partitions on the rootdisk and
mirrordisk -</span></b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'> <b>Optional Step - The benefits are worth the effort!<o:p></o:p></b></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Update:</span></b><span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:Arial'><span style="mso-spacerun: yes">&nbsp; </span>This
step can be automated using the Veritas supplied program: vxbootsetup.<span
style="mso-spacerun: yes">&nbsp; </span>Simply execute the following command:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxbootsetup<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal><i><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Or you may do it the manual way as described below:<b><o:p></o:p></b></span></i></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Notice how you did NOT create the disk partitions manually
when you initialized the mirror disk.<span style="mso-spacerun: yes">&nbsp;
</span>This is because VxVM automatically does its partitioning for you.<span
style="mso-spacerun: yes">&nbsp; </span>This is also true for the root disk
after it has been re-initialized and brought back into rootdg.<span
style="mso-spacerun: yes">&nbsp; </span>That is, the original rootdisk
partition scheme has been replaced by Veritas's partition scheme.<span
style="mso-spacerun: yes">&nbsp; </span>This means that the underlying
partitions for each volume(swap, /opt, /var, /home) are not physically layed
out on the drives corresponding to the veritas volumes.<span
style="mso-spacerun: yes">&nbsp; </span>In some situations though, you might
want to be able to access the partitions corresponding to each volume by
manually mounting the slice.<span style="mso-spacerun: yes">&nbsp; </span>In a
recovery situation for example, you may want to boot from cdrom and access the
/opt partition by manually mounting the slice without the veritas drivers
loaded.<span style="mso-spacerun: yes">&nbsp; </span>This is not possible
unless you create the underlying partition mapping directly to the opt volume
using the &quot;vxmksdpart&quot; command.<span style="mso-spacerun: yes">&nbsp;
</span>All underlying partitions except / should be created.<span
style="mso-spacerun: yes">&nbsp; </span>The / partition is automatically
created and is mapped correctly to the corresponding veritas root volume.<span
style="mso-spacerun: yes">&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>One Caveat, you cannot use partition 3 or 4 because this is
typically where Veritas stores is private and public region.<span
style="mso-spacerun: yes">&nbsp; </span>The following is snipped from the
&quot;format&quot; utility listing the Veritas partitions.<span
style="mso-spacerun: yes">&nbsp; </span>This shows that the root partition
exists but the swap, /var, /opt, home partitions are not mapped on the
drive(Veritas knows where they exist on the drive because of its private and
public regions):<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Part<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Tag<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp; </span>Flag<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>Cylinders<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Size<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Blocks<o:p></o:p></span></p>

<p class=MsoNormal style='tab-stops:344.55pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'><span style="mso-spacerun:
yes">&nbsp; </span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>root<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp; </span>wm<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>1 - 2282<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>3.91GB<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;
</span>(2282/0/0)<span style="mso-spacerun: yes">&nbsp; </span>8194662<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>&lt;===
&quot;/&quot; exists</b> <o:p></o:p></span></p>

<p class=MsoNormal style='tab-stops:346.3pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'><span style="mso-spacerun:
yes">&nbsp; </span>1 unassigned<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp; </span>wm<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(0/0/0)<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b>&lt;=== Unassigned</b><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'><span style="mso-spacerun: yes">&nbsp; </span>2<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>backup<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>wm<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0 -
4923<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>8.43GB<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;
</span>(4924/0/0) 17682084<o:p></o:p></span></p>

<p class=MsoNormal style='tab-stops:348.0pt 368.55pt'><span style='font-size:
10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'><span style="mso-spacerun:
yes">&nbsp; </span>3<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>wu<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0 -<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>1.75MB<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>(1/0/0)<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>3591<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== Private Region</b><o:p></o:p></span></p>

<p class=MsoNormal style='tab-stops:345.45pt 368.55pt'><span style='font-size:
10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'><span style="mso-spacerun:
yes">&nbsp; </span>4<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>wu<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>1 -
4923<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>8.43GB <span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;</span>(4923/0/0) 17678493<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>&lt;===
Public Region</b><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'><span style="mso-spacerun: yes">&nbsp; </span>5
unassigned<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>wm<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(0/0/0)<span
style="mso-spacerun: yes">&nbsp; </span><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>0<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-spacerun: yes">&nbsp;</span><b>&lt;=== Unassigned</b><o:p></o:p></span></p>

<p class=MsoNormal style='tab-stops:347.15pt'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'><span style="mso-spacerun:
yes">&nbsp; </span>6 unassigned<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp; </span>wm<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(0/0/0) <span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>0<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-spacerun: yes">&nbsp;&nbsp;</span><b>&lt;=== Unassigned<o:p></o:p></b></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'><span style="mso-spacerun: yes">&nbsp; </span>7
unassigned<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>wm<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(0/0/0)<span
style="mso-spacerun: yes">&nbsp;&nbsp; </span><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>0<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== Unassigned<o:p></o:p></b></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>You may use the unassigned partitions which are 1, 5,6, and
7 to map to the veritas volumes.<span style="mso-spacerun: yes">&nbsp;
</span>Be sure to document which partitions map to the Veritas volumes for
future reference.<span style="mso-spacerun: yes">&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>The &quot;vxmksdpart&quot; arguments are the subdisk(which
maps directly to the volume), slice, tag and flag.<span style="mso-spacerun:
yes">&nbsp; </span>Be sure to use the correct tag and flag for you particular
Solaris version.<span style="mso-spacerun: yes">&nbsp; </span>Reference the man
page for &quot;fmthard&quot; for correct options.<span style="mso-spacerun:
yes">&nbsp; </span>Use the &quot;vxprint&quot; command to get the correct
subdisk names:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>Rootdisk:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxmksdpart -g rootdg rootdisk-02
1 0x03 0x01<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== swap</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in;tab-stops:308.8pt'><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>#
vxmksdpart -g rootdg rootdisk-03 5 0x07 0x00<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== /var</b><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxmksdpart -g rootdg rootdisk-04
6 0x06 0x00<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== /opt</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxmksdpart -g rootdg rootdisk-05
7 0x08 0x00<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>&lt;=== /export/home</b><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>Specify the
primary swap partition as the dump device:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># dumpadm -d /dev/dsk/c0t0d0s1<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>RootMirror:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxmksdpart -g rootdg
rootmirror-02 1 0x03 0x01<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>&lt;===
swap</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxmksdpart -g rootdg
rootmirror-03 5 0x07 0x00<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>&lt;===
/var</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxmksdpart -g rootdg
rootmirror-04 6 0x06 0x00<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b>&lt;===
/opt</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxmksdpart -g rootdg
rootmirror-05 7 0x08 0x00<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;</span><b>&lt;=== /export/home</b><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h2><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></h2>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>For maximum redundancy, configure all private regions to
have a copy of rootdg database<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxedit -g rootdg set nconfig=all
rootdg<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxedit -g rootdg set nlog=all
rootdg<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg flush rootdg<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h2><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>Configure
VxVM to use host spare rather than hot relocation<o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vi /etc/rc2.d/S95vxvm-recover<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>Comment out the &quot;vxrelocd
root &amp;&quot; and uncomment &quot;vxsparecheck root &amp;&quot;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h2><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>Create
OBP device alias for rootdisk and rootmirror.<span style="mso-spacerun:
yes">&nbsp; </span>Set PROM to boot to the aliases.<o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxeeprom devalias rootdisk
c0t0d0s0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxeeprom devalias rootmirror
c0t1d0s0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># eeprom
&quot;boot-device=rootdisk rootmirror&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>Verify the correct eeprom
information:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># eeprom | grep disk<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Update</span><span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:Arial;font-weight:normal'>:<span style="mso-spacerun:
yes">&nbsp; </span>The previous &quot;vxeeprom&quot; commands may not work for
all boot proms.<span style="mso-spacerun: yes">&nbsp; </span>If you are unable
to boot to the &quot;rootdisk&quot; device on reboot, you should set the device
alias using the &quot;nvalias&quot; command at the boot prom.<span
style="mso-spacerun: yes">&nbsp; </span>This can be done by first doing a
&quot;devalias&quot; to display the PATH of each disk, and use the
&quot;nvalias&quot; command to set the rootdisk and rootmirror alias
manually.<span style="mso-spacerun: yes">&nbsp; </span>The following is an
example:<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>ok </span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>devalias</span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:
normal'><o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>&#8230;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>disk<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/pci@1f,4000/scsi@3/disk@0,0<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;===
disk is &quot;rootdisk&quot;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>disk0<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/pci@1f,4000/scsi@3/disk@0,0<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>disk1<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/pci@1f,4000/scsi@3/disk@1,0<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;===
disk1 is &quot;rootmirror&quot;</span><span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:Arial'><o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&#8230;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>ok</span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'> nvalias
rootdisk /pci@1f,4000/scsi@3/disk@0,0</span><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'><o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>ok </span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>nvalias
rootmirror /pci@1f,4000/scsi@3/disk@1,0<o:p></o:p></span></p>

<p class=MsoBodyText style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;font-weight:normal'>ok</span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'> boot<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>How to Recover from Primary Disk Failure<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Grab your backup drive from the spare parts shelf with the same
exact geometry as the failed drive. You do have one; don't you? <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h2><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>Configure
system to see drive<o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># devfsadm<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>### Prior to Solaris
8 try &quot;# drvconfig; disks; devlinks&quot;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Initialize the new drive, add to rootdg as
&quot;newdisk&quot;, and replace old &quot;rootdisk&quot; with
&quot;newdisk&quot;:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdisksetup -i c0t0d0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg -g rootdg adddisk
newdisk=c0t0d0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg repldisk rootdisk=newdisk<o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Parition the new drive exactly the same as rootmirror:<o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>I have not figured out a way to do this automatically
instead of using format.<span style="mso-spacerun: yes">&nbsp; </span>The
fmthard command will not work because it does not allow overlapping
partitions.<span style="mso-spacerun: yes">&nbsp; </span>The dd command should
not be used as it also copies over the Veritas diskid.<span
style="mso-spacerun: yes">&nbsp; </span>In which case, there will be duplicate
diskid's on each disk causing the system not to boot.<span style="mso-spacerun:
yes">&nbsp; </span>Please use the following procedure instead:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># format<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>0</b> for the new drive<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>p</b> for partition<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>p</b> to view current
partition layout<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>s</b> to select the
partition table of rootmirror<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>1</b> to copy partition
table of rootmirror onto new drive<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>l</b> to label disk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>y</b> to continue<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>q</b> to quit partition
menu<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>q</b> to quit format
utility<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Re-attach the mirror for each volume:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att rootvol rootvol-01<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att swapvol swapvol-01<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att var var-01<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att opt opt-01<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att home home-01<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h1><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>&nbsp;<o:p></o:p></span></h1>

<h1><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>How
to Recover from Mirror Disk Failure<o:p></o:p></span></h1>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Grab your backup drive from the spare parts shelf with the
same exact geometry as the failed drive. You do have one; don't you? <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<h2><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Arial'>Configure
system to see drive<o:p></o:p></span></h2>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># devfsadm<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>### Prior to Solaris
8 try &quot;# drvconfig; disks; devlinks&quot;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Initialize the new drive, add to rootdg as
&quot;newdisk&quot;, and replace old &quot;rootmirror&quot; with
&quot;newdisk&quot;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdisksetup -i c0t1d0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg -g rootdg adddisk
newdisk=c0t1d0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxdg repldisk rootmirror=newdisk<o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Parition the new drive exactly the same as rootdisk:<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>I have not figured out a way to do this automatically
instead of using format.<span style="mso-spacerun: yes">&nbsp; </span>The
fmthard command will not work because it does not allow overlapping
partitions.<span style="mso-spacerun: yes">&nbsp; </span>The dd command should
not be used as it also copies over the Veritas diskid.<span
style="mso-spacerun: yes">&nbsp; </span>In which case, there will be duplicate
diskid's on each disk causing the system not to boot.<span style="mso-spacerun:
yes">&nbsp; </span>Please use the following procedure instead:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># format<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>1</b> for the new drive<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>p</b> for partition<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>p</b> to view current
partition layout<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>s</b> to select the
partition table of rootdisk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>0</b> to copy partition
table of rootdisk onto new drive<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>l</b> to label disk<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>y</b> to continue<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>q</b> to quit partition
menu<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>; Enter <b>q</b> to quit format
utility<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>Re-attach the mirror for each volume:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att rootvol rootvol-02<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att swapvol swapvol-02<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att var var-02<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att opt opt-02<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'># vxplex att home home-02<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></p>

</div>

</body>

</html>
</td>
                          </tr>
                        </table></td>
                    </tr>
                  </table></td>
              </tr>
            </table></td>
        </tr>
      </table></td>
  </tr>
</table></td>
</table>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="4">
  <tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="4">
        <tr>
          <td><div align="center"><font class="small"></font></div></td>
        </tr>
        <tr>
          <td><div align="center"></div></td>
        </tr>
      </table></td>
  </tr>
</table>
<center>
<font class="footmsg">
Sun Microsystems Inc. does not sponsor, approve, or endorse the content of this web site. This site does not represent Sun Microsystems in any way.<br>
Web site engine's code is Copyright &copy; 2003 by <a href="http://phpnuke.org"><font class="footmsg_l">PHP-Nuke</font></a>. All Rights Reserved. PHP-Nuke is Free Software released under the <a href="http://www.gnu.org"><font class="footmsg_l">GNU/GPL license</font></a>.<br>Page Generation: 0.435 Seconds<br>
</font>
</center>
</body>
</html>